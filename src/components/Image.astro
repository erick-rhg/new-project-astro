---
const { img, description, subtitle, custom_img } = Astro.props;
const base = import.meta.env.BASE_URL || '/';

// Normalize image path: accept '/img/..', 'img/..' or full URLs.
let imgSrc = img;
if (typeof img === 'string' && img.length) {
  if (/^https?:\/\//i.test(img)) {
    imgSrc = img; // external
  } else {
    // remove leading slash to keep relative resolution and prefix with base
    imgSrc = img.startsWith('/') ? img.slice(1) : img;
    imgSrc = `${base}${imgSrc}`;
  }
}
---

<div class:list={[custom_img]}>
  {img && <img src={imgSrc} alt="" />}
  {subtitle && <h4>{subtitle}</h4>}
  {description && <p>{description}</p>}
</div>

<style>
  .mobile-hide img {
    height: 100%;
    object-fit: contain;
  }

  .mobile-hide {
    display: none;
  }

  h4 {
    color: var(--color-cta);
  }

  @media (min-width: 990px) {
    .mobile-hide {
      display: block;
    }
  }
</style>
